//Credit Card Validation
//Credit Card Validator
(function(){var e,t=Array.prototype.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};e=jQuery;e.fn.validateCreditCard=function(n){var r,i,s,o,u,a,f;r=[{name:"amex",pattern:/^3[47]/,valid_length:[15]},{name:"diners_club_carte_blanche",pattern:/^30[0-5]/,valid_length:[14]},{name:"diners_club_international",pattern:/^36/,valid_length:[14]},{name:"diners_club_us_and_ca",pattern:/^5[45]/,valid_length:[16]},{name:"jcb",pattern:/^35(2[89]|[3-8][0-9])/,valid_length:[16]},{name:"laser",pattern:/^(6304|630[69]|6771)/,valid_length:[16,17,18,19]},{name:"visa_electron",pattern:/^(4026|417500|4508|4844|491(3|7))/,valid_length:[16]},{name:"visa",pattern:/^4/,valid_length:[13,16]},{name:"mastercard",pattern:/^5[1-5]/,valid_length:[16]},{name:"maestro",pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,valid_length:[12,13,14,15,16,17,18,19]},{name:"discover",pattern:/^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)/,valid_length:[16]}];i=function(e){var t,n,i;for(n=0,i=r.length;n<i;n++){t=r[n];if(e.match(t.pattern))return t}return null};o=function(e){var t,n,r,i,s;r=0;s=e.split("").reverse().join("");for(n=0,i=s.length;n<i;n++){t=s[n];t=+t;if(n%2){t*=2;t<10?r+=t:r+=t-9}else r+=t}return r%10===0};s=function(e,n){var r;return r=e.length,t.call(n.valid_length,r)>=0};f=function(e){var t,r,u;t=i(e);u=!1;r=!1;if(t!=null){u=o(e);r=s(e,t)}return n({card_type:t,luhn_valid:u,length_valid:r})};a=function(){var t;t=u(e(this).val());return f(t)};u=function(e){return e.replace(/[ -]/g,"")};this.bind("input",function(){e(this).unbind("keyup");return a.call(this)});this.bind("keyup",function(){return a.call(this)});a.call(this);return this}}).call(this);var is={ie:navigator.appName=="Microsoft Internet Explorer",java:navigator.javaEnabled(),ns:navigator.appName=="Netscape",ua:navigator.userAgent.toLowerCase(),version:parseFloat(navigator.appVersion.substr(21))||parseFloat(navigator.appVersion),win:navigator.platform=="Win32"};is.mac=is.ua.indexOf("mac")>=0;if(is.ua.indexOf("opera")>=0){is.ie=is.ns=!1;is.opera=!0}if(is.ua.indexOf("gecko")>=0){is.ie=is.ns=!1;is.gecko=!0};