// usage: log('inside coolFunc', this, arguments);
// paulirish.com/2009/log-a-lightweight-wrapper-for-consolelog/
function cssPaint(e){e.addClass("hasError");e.after('<span class="validationError">'+$message+"</span>");$("form button").addClass("disabled")}function clearPaint(e){e.removeClass("hasError");e.next("span.validationError").remove();$("form button").removeClass("disabled")}function required(e){return 0==e.length?($message="This field is required",!0):!1}function email(e){e=e.replace(" ","").replace("	","");return 0==e.length?($message="Your email is required",!0):/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/.test(e)?!1:($message="Please provide a valid email",!0)}function equalTo(e,t){var n=t.parent("p").prev("p").children("input").val();return e!=n?($message="The passwords do not match",!0):!1}function checkPassword(e,t,n){$.ajax({url:"/ajax/admin/admin_functionality.php",type:"POST",data:{id:t,checkPassword:e},success:function(e){0!=e&&($message=e,cssPaint(n))}})}function numeric(e){return 0==e.length?($message="this field is required",!0):/^[-]?\d*\.?\d*$/.test(e)?!1:($message="All values must be numeric",!0)}function zip(e){return 0==e.length?!0:/^\d{5}(-\d{4})?$/.test(e)?!1:($message="Please enter a valid zip",!0)}function usPhone(e){return 0==e.length?($message="This field is required",!0):/^\(?[2-9]\d{2}[\)\.-]?\s?\d{3}[\s\.-]?\d{4}$/.test(e)?!1:($message="Please enter a valid US phone (xxx)xxx-xxxx",!0)}function nospecial(e){return 0==e.length?!0:/^[a-zA-Z0-9 \?]*$/.test(e)?!1:($message="Please do not enter any special characters",!0)}function date(e){if(0==e.length)return!0;var t=/^(\d{2})[\/](\d{2})[\/](\d{4})$/;if(!t.test(e))return $message="Please enter a valid date. mm/dd/yyyyy",!0;var n=e.match(t),e=n[1],t=parseInt(n[2]),n=parseInt(n[3]),r=(new Date).getFullYear();(new Date).getDate();(new Date).getMonth();return 1>e||12<e||1900>n||n>r?($message="Please enter a valid date. mm/dd/yyyyy",!0):1>t&&t>(2==e?0==n%4?29:28:4==e||6==e||9==e||11==e?30:31)?($message="Please enter a valid date. mm/dd/yyyyy",!0):!1}function futureDate(e){if(0==e.length)return!0;var t=/^(\d{2})[\/](\d{2})[\/](\d{4})$/;if(!t.test(e))return $message="Please Enter Valid Date mm/dd/yyyy",!0;var n=e.match(t),e=parseInt(n[1]),t=parseInt(n[2]),n=parseInt(n[3]),r=(new Date).getFullYear(),i=(new Date).getDate(),s=(new Date).getMonth();if(1>e||12<e||1900>n)return $message="Please Enter Valid Date mm/dd/yyyy",!0;if(1>t&&t>(2==e?0==n%4?29:28:4==e||6==e||9==e||11==e?30:31))return $message="Please enter a valid date. mm/dd/yyyyy",!0;if(n<r)return $message="Must be a future Date",!0;if(n==r&&e<s+1)return $message="Must be a future Date",!0;if(n==r&&e==s+1&&t<i)return $message="Must be a future Date",!0}function isChecked(e){return e.is(":checked")?!1:!0}function validate(e){e.children("fieldset").find(":input:not(button)").each(function(){var e=$(this),t=e.attr("class"),n=e.val(),r=e.attr("sel");switch(t){case"required":required(n)&&cssPaint(e);break;case"email":email(n)&&cssPaint(e);break;case"date":date(n)&&cssPaint(e);break;case"age":age(n)&&cssPaint(e);break;case"usPhone":usPhone(n)&&cssPaint(e);break;case"numeric":numeric(n)&&cssPaint(e);break;case"zip":zip(n)&&cssPaint(e);break;case"equalTo":equalTo(n,e)&&cssPaint(e);break;case"checkPassword":checkPassword(n,r)&&cssPaint(e);break;case"nospecial":nospecial(n)&&cssPaint(e);break;case"isChecked":isChecked(e.attr("checked"))&&(e.addClass("hasError"),$(".message").html("<p>Please comply with our privacy policy.</p>"))}$(this).children("button").addClass("disabled")})}function formatMoney(e,t){var n=parseFloat(e);isNaN(n)&&(n=0);var r="";0>n&&(r="-");n=Math.abs(n);n=parseInt(100*(n+.005));s=new String(n/100);0>s.indexOf(".")&&(s+=".00");s.indexOf(".")==s.length-2&&(s+="0");s=r+s;return t+addCommas(s)}function addCommas(e){var t=e.split(".",2),e=t[1],t=parseInt(t[0]);if(isNaN(t))return"";var n="";0>t&&(n="-");for(var t=Math.abs(t),r=new String(t),t=[];3<r.length;){var i=r.substr(r.length-3);t.unshift(i);r=r.substr(0,r.length-3)}0<r.length&&t.unshift(r);r=t.join(",");e=1>e.length?r:r+"."+e;return n+e}window.log=function(){log.history=log.history||[];log.history.push(arguments);arguments.callee=arguments.callee.caller;this.console&&console.log(Array.prototype.slice.call(arguments))};(function(e){function t(){}for(var n="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(","),r;r=n.pop();)e[r]=e[r]||t})(window.console=window.console||{});(function(e){e.fn.modal=function(t){function i(){r.removeClass();r.addClass("error");r.addClass("modal");r.children(".text").after('<a class="reportError button">Report Error</a>');u()}function s(e){r.removeClass();r.addClass("message");r.addClass("modal");u();r.delay(3e3).fadeOut(200,function(){f()})}function o(){r.removeClass();r.addClass("html");r.addClass("modal");e.ajax({type:"POST",url:n.url,success:function(e){r.children(".text").html(e);u()},error:function(e,t,n){r.html('<ul class="errors"><li>Something went wrong with out System, please alert our admin with this id: AJ198473</li></ul>');u()}})}function u(){if($placement=="center"){var t=e(window).height()+e(window).scrollTop(),i=e(window).width();r.css("width",n.width);r.css("height",n.height);var s=e(window).height()+r.offset().top+r.height(),o=e(window).width();e("#mask").css({width:o,height:s});e("#mask").fadeIn(1e3);e("#mask").fadeTo("slow",.6);r.css({top:t/4,left:i/2-r.width()/2});r.children(".text").before('<a class="close"></a>');_left=r.offset().left;_objectW=r.outerWidth()-15;_totalLeft=_objectW+_left;_top=r.offset().top;_objectH=17.5;_totalTop=_top-_objectH;r.children("a.close").css({left:_totalLeft,top:_totalTop})}r.fadeIn(1e3)}function f(){e.ajax({url:"/ajax/admin/admin_functionality.php",type:"POST",data:{closeError:1},success:function(t){r.hide();r.html("");r.removeClass();e("#mask").remove()},error:function(t,n,r){e(".text").html("I was not able to close your error. Please report to system Admin.")}})}var n={style:"message",text:"",url:"",cancel:"",reportError:!0,reportURL:"",height:"",width:"60%"},t=e.extend(n,t),r=e(this);r.before('<div id="mask"><div>');$placement="center";if(n.style=="error"){r.html('<div class="text">'+n.text+"<div>");n.width="40%";i()}else if(n.style=="message"){r.html(n.text);$placement="top";s()}else if(n.style=="html"){r.html('<div class="text">'+n.text+"</div>");o()}e(".modal .close").live("click",function(){f();n.cancel.call(this)});e("#mask").live("click",function(){f();n.cancel})}})(jQuery);var $message="This field is required";$(".required").live("focus",function(){clearPaint($(this))});$(".required").live("focusout",function(){required($(this).val())&&cssPaint($(this))});$(".email").live("focus",function(){clearPaint($(this))});$(".email").live("focusout",function(){email($(this).val())&&cssPaint($(this))});$(".usPhone").live("focus",function(){clearPaint($(this))});$(".usPhone").live("focusout",function(){usPhone($(this).val())&&cssPaint($(this))});$(".date").live("focus",function(){clearPaint($(this))});$(".date").live("focusout",function(){date($(this).val())&&cssPaint($(this))});$(".age").live("focus",function(){clearPaint($(this))});$(".age").live("focusout",function(){age($(this).val())&&cssPaint($(this))});$(".adminAge").live("focus",function(){clearPaint($(this))});$(".adminAge").live("focusout",function(){adminAge($(this).val())&&cssPaint($(this))});$(".futureDate").live("focus",function(){clearPaint($(this))});$(".futureDate").live("focusout",function(){futureDate($(this).val())&&cssPaint($(this))});$(".numeric").live("focus",function(){clearPaint($(this))});$(".numeric").live("focusout",function(){numeric($(this).val())&&cssPaint($(this))});$(".zip").live("focus",function(){clearPaint($(this))});$(".zip").live("focusout",function(){zip($(this).val())&&cssPaint($(this))});$(".equalTo").live("focus",function(){clearPaint($(this))});$(".equalTo").live("focusout",function(){equalTo($(this).val(),$(this))&&cssPaint($(this))});$(".checkPassword").live("focus",function(){clearPaint($(this))});$(".checkPassword").live("focusout",function(){checkPassword($(this).val(),$(this).attr("sel"),$(this))});$(".nospecial").live("focus",function(){clearPaint($(this))});$(".nospecial").live("focusout",function(){nospecial($(this).val())&&cssPaint($(this))});$(".ac_input").live("focus",function(){clearPaint($(this))});$(".isChecked").live("click",function(){clearPaint($(this));$(".message").html("")});$(".disabled").live("click",function(e){e.preventDefault()});(function(e){e.fn.extend({autocomplete:function(t,n){var r="string"==typeof t,n=e.extend({},e.Autocompleter.defaults,{url:r?t:null,data:r?null:t,delay:r?e.Autocompleter.defaults.delay:10,max:n&&!n.scroll?10:150},n);n.highlight=n.highlight||function(e){return e};n.formatMatch=n.formatMatch||n.formatItem;return this.each(function(){new e.Autocompleter(this,n)})},result:function(e){return this.bind("result",e)},search:function(e){return this.trigger("search",[e])},flushCache:function(){return this.trigger("flushCache")},setOptions:function(e){return this.trigger("setOptions",[e])},unautocomplete:function(){return this.trigger("unautocomplete")}});e.Autocompleter=function(t,n){function s(){var e=w.selected();if(!e)return!1;var t=e.result;v=t;if(n.multiple){var r=u(p.val());1<r.length&&(t=r.slice(0,r.length-1).join(n.multipleSeparator)+n.multipleSeparator+t);t+=n.multipleSeparator}p.val(t);f();p.trigger("result",[e.data,e.value]);return!0}function o(e,t){if(y==r)w.hide();else{var i=p.val();if(t||i!=v)v=i,i=a(i),i.length>=n.minChars?(p.addClass(n.loadingClass),n.matchCase||(i=i.toLowerCase()),h(i,l,f)):(p.removeClass(n.loadingClass),w.hide())}}function u(t){if(!t)return[""];var t=t.split(n.multipleSeparator),r=[];e.each(t,function(t,n){e.trim(n)&&(r[t]=e.trim(n))});return r}function a(e){if(!n.multiple)return e;e=u(e);return e[e.length-1]}function f(){var r=w.visible();w.hide();clearTimeout(d);p.removeClass(n.loadingClass);n.mustMatch&&p.search(function(e){e||(n.multiple?(e=u(p.val()).slice(0,-1),p.val(e.join(n.multipleSeparator)+(e.length?n.multipleSeparator:""))):p.val(""))});r&&e.Autocompleter.Selection(t,t.value.length,t.value.length)}function l(r,s){if(s&&s.length&&g){p.removeClass(n.loadingClass);w.display(s,r);var o=s[0].value;n.autoFill&&a(p.val()).toLowerCase()==r.toLowerCase()&&y!=i&&(p.val(p.val()+o.substring(a(v).length)),e.Autocompleter.Selection(t,v.length,v.length+o.length));w.show()}else f()}function h(r,i,s){n.matchCase||(r=r.toLowerCase());var o=m.load(r);if(o&&o.length)i(r,o);else if("string"==typeof n.url&&0<n.url.length){var u={timestamp:+(new Date)};e.each(n.extraParams,function(e,t){u[e]="function"==typeof t?t():t});e.ajax({mode:"abort",port:"autocomplete"+t.name,dataType:n.dataType,url:n.url,data:e.extend({q:a(r),limit:n.max},u),success:function(t){var s;if(!(s=n.parse&&n.parse(t))){s=[];for(var t=t.split("\n"),o=0;o<t.length;o++){var u=e.trim(t[o]);u&&(u=u.split("|"),s[s.length]={data:u,value:u[0],result:n.formatResult&&n.formatResult(u,u[0])||u[0]})}}m.add(r,s);i(r,s)}})}else w.emptyList(),s(r)}var r,i;r=46;i=8;var p=e(t).attr("autocomplete","off").addClass(n.inputClass),d,v="",m=e.Autocompleter.Cache(n),g=0,y,b={mouseDownOnSelect:!1},w=e.Autocompleter.Select(n,t,s,b),E;e.browser.opera&&e(t.form).bind("submit.autocomplete",function(){if(E)return E=!1});p.bind((e.browser.opera?"keypress":"keydown")+".autocomplete",function(t){y=t.keyCode;switch(t.keyCode){case 38:t.preventDefault();w.visible()?w.prev():o(0,!0);break;case 40:t.preventDefault();w.visible()?w.next():o(0,!0);break;case 33:t.preventDefault();w.visible()?w.pageUp():o(0,!0);break;case 34:t.preventDefault();w.visible()?w.pageDown():o(0,!0);break;case n.multiple&&","==e.trim(n.multipleSeparator)&&188:case 9:case 13:if(s())return t.preventDefault(),E=!0,!1;break;case 27:w.hide();break;default:clearTimeout(d),d=setTimeout(o,n.delay)}}).focus(function(){g++}).blur(function(){g=0;b.mouseDownOnSelect||(clearTimeout(d),d=setTimeout(f,200))}).click(function(){1<g++&&!w.visible()&&o(0,!0)}).bind("search",function(){function t(e,t){var r;if(t&&t.length)for(var i=0;i<t.length;i++)if(t[i].result.toLowerCase()==e.toLowerCase()){r=t[i];break}"function"==typeof n?n(r):p.trigger("result",r&&[r.data,r.value])}var n=1<arguments.length?arguments[1]:null;e.each(u(p.val()),function(e,n){h(n,t,t)})}).bind("flushCache",function(){m.flush()}).bind("setOptions",function(t,r){e.extend(n,r);"data"in r&&m.populate()}).bind("unautocomplete",function(){w.unbind();p.unbind();e(t.form).unbind(".autocomplete")})};e.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"ac_results",loadingClass:"ac_loading",minChars:1,delay:400,matchCase:!1,matchSubset:!0,matchContains:!1,cacheLength:10,max:100,mustMatch:!1,extraParams:{},selectFirst:!0,formatItem:function(e){return e[0]},formatMatch:null,autoFill:!1,width:0,multiple:!1,multipleSeparator:", ",highlight:function(e,t){return e.replace(RegExp("(?![^&;]+;)(?!<[^<>]*)("+t.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>")},scroll:!0,scrollHeight:180};e.Autocompleter.Cache=function(t){function n(e,n){t.matchCase||(e=e.toLowerCase());var r=e.indexOf(n);"word"==t.matchContains&&(r=e.toLowerCase().search("\\b"+n.toLowerCase()));return-1==r?!1:0==r||t.matchContains}function r(e,n){u>t.cacheLength&&s();o[e]||u++;o[e]=n}function i(){if(!t.data)return!1;var n={},i=0;t.url||(t.cacheLength=1);n[""]=[];for(var s=0,o=t.data.length;s<o;s++){var u=t.data[s],u="string"==typeof u?[u]:u,f=t.formatMatch(u,s+1,t.data.length);if(!1!==f){var l=f.charAt(0).toLowerCase();n[l]||(n[l]=[]);u={value:f,data:u,result:t.formatResult&&t.formatResult(u)||f};n[l].push(u);i++<t.max&&n[""].push(u)}}e.each(n,function(e,n){t.cacheLength++;r(e,n)})}function s(){o={};u=0}var o={},u=0;setTimeout(i,25);return{flush:s,add:r,populate:i,load:function(r){if(!t.cacheLength||!u)return null;if(!t.url&&t.matchContains){var i=[],s;for(s in o)if(0<s.length){var f=o[s];e.each(f,function(e,t){n(t.value,r)&&i.push(t)})}return i}if(o[r])return o[r];if(t.matchSubset)for(s=r.length-1;s>=t.minChars;s--)if(f=o[r.substr(0,s)])return i=[],e.each(f,function(e,t){n(t.value,r)&&(i[i.length]=t)}),i;return null}}};e.Autocompleter.Select=function(t,n,r,i){function o(){d&&(v=e("<div/>").hide().addClass(t.resultsClass).css("position","absolute").appendTo(document.body),m=e("<ul/>").appendTo(v).mouseover(function(t){u(t).nodeName&&"LI"==u(t).nodeName.toUpperCase()&&(l=e("li",m).removeClass(s).index(u(t)),e(u(t)).addClass(s))}).click(function(t){e(u(t)).addClass(s);r();n.focus();return!1}).mousedown(function(){i.mouseDownOnSelect=!0}).mouseup(function(){i.mouseDownOnSelect=!1}),0<t.width&&v.css("width",t.width),d=!1)}function u(e){for(e=e.target;e&&"LI"!=e.tagName;)e=e.parentNode;return e?e:[]}function a(e){f.slice(l,l+1).removeClass(s);l+=e;0>l?l=f.size()-1:l>=f.size()&&(l=0);e=f.slice(l,l+1).addClass(s);if(t.scroll){var n=0;f.slice(0,l).each(function(){n+=this.offsetHeight});n+e[0].offsetHeight-m.scrollTop()>m[0].clientHeight?m.scrollTop(n+e[0].offsetHeight-m.innerHeight()):n<m.scrollTop()&&m.scrollTop(n)}}var s;s="ac_over";var f,l=-1,h,p="",d=!0,v,m;return{display:function(n,r){o();h=n;p=r;m.empty();for(var i=t.max&&t.max<h.length?t.max:h.length,u=0;u<i;u++)if(h[u]){var a=t.formatItem(h[u].data,u+1,i,h[u].value,p);!1!==a&&(a=e("<li/>").html(t.highlight(a,p)).addClass(0==u%2?"ac_even":"ac_odd").appendTo(m)[0],e.data(a,"ac_data",h[u]))}f=m.find("li");t.selectFirst&&(f.slice(0,1).addClass(s),l=0);e.fn.bgiframe&&m.bgiframe()},next:function(){a(1)},prev:function(){a(-1)},pageUp:function(){0!=l&&0>l-8?a(-l):a(-8)},pageDown:function(){l!=f.size()-1&&l+8>f.size()?a(f.size()-1-l):a(8)},hide:function(){v&&v.hide();f&&f.removeClass(s);l=-1},visible:function(){return v&&v.is(":visible")},current:function(){return this.visible()&&(f.filter("."+s)[0]||t.selectFirst&&f[0])},show:function(){var r=e(n).offset();v.css({width:"string"==typeof t.width||0<t.width?t.width:e(n).width(),top:r.top+n.offsetHeight,left:r.left}).show();if(t.scroll&&(m.scrollTop(0),m.css({maxHeight:t.scrollHeight,overflow:"auto"}),e.browser.msie&&"undefined"==typeof document.body.style.maxHeight)){var i=0;f.each(function(){i+=this.offsetHeight});r=i>t.scrollHeight;m.css("height",r?t.scrollHeight:i);r||f.width(m.width()-parseInt(f.css("padding-left"))-parseInt(f.css("padding-right")))}},selected:function(){var t=f&&f.filter("."+s).removeClass(s);return t&&t.length&&e.data(t[0],"ac_data")},emptyList:function(){m&&m.empty()},unbind:function(){v&&v.remove()}}};e.Autocompleter.Selection=function(e,t,n){if(e.createTextRange){var r=e.createTextRange();r.collapse(!0);r.moveStart("character",t);r.moveEnd("character",n);r.select()}else e.setSelectionRange?e.setSelectionRange(t,n):e.selectionStart&&(e.selectionStart=t,e.selectionEnd=n);e.focus()}})(jQuery);(function(e){function t(t,r){var s=t==window,f=r&&void 0!==r.message?r.message:void 0,r=e.extend({},e.blockUI.defaults,r||{});r.overlayCSS=e.extend({},e.blockUI.defaults.overlayCSS,r.overlayCSS||{});var d=e.extend({},e.blockUI.defaults.css,r.css||{}),m=e.extend({},e.blockUI.defaults.themedCSS,r.themedCSS||{}),f=void 0===f?r.message:f;s&&h&&n(window,{fadeOut:0});if(f&&"string"!=typeof f&&(f.parentNode||f.jquery)){var g=f.jquery?f[0]:f,y={};e(t).data("blockUI.history",y);y.el=g;y.parent=g.parentNode;y.display=g.style.display;y.position=g.style.position;y.parent&&y.parent.removeChild(g)}var y=r.baseZ,E=e.browser.msie||r.forceIframe?e('<iframe class="blockUI" style="z-index:'+y++ +';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+r.iframeSrc+'"></iframe>'):e('<div class="blockUI" style="display:none"></div>'),g=e('<div class="blockUI blockOverlay" style="z-index:'+y++ +';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>'),y=e(r.theme&&s?'<div class="blockUI '+r.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+y+';display:none;position:fixed"><div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(r.title||"&nbsp;")+'</div><div class="ui-widget-content ui-dialog-content"></div></div>':r.theme?'<div class="blockUI '+r.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+y+';display:none;position:absolute"><div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(r.title||"&nbsp;")+'</div><div class="ui-widget-content ui-dialog-content"></div></div>':s?'<div class="blockUI '+r.blockMsgClass+' blockPage" style="z-index:'+y+';display:none;position:fixed"></div>':'<div class="blockUI '+r.blockMsgClass+' blockElement" style="z-index:'+y+';display:none;position:absolute"></div>');f&&(r.theme?(y.css(m),y.addClass("ui-widget-content")):y.css(d));(!r.applyPlatformOpacityRules||!e.browser.mozilla||!/Linux/.test(navigator.platform))&&g.css(r.overlayCSS);g.css("position",s?"fixed":"absolute");(e.browser.msie||r.forceIframe)&&E.css("opacity",0);var d=[E,g,y],S=s?e("body"):e(t);e.each(d,function(){this.appendTo(S)});r.theme&&r.draggable&&e.fn.draggable&&y.draggable({handle:".ui-dialog-titlebar",cancel:"li"});d=l&&(!e.boxModel||0<e("object,embed",s?null:t).length);if(c||d){s&&r.allowBodyStretch&&e.boxModel&&e("html,body").css("height","100%");if((c||!e.boxModel)&&!s)var d=parseInt(e.css(t,"borderTopWidth"))||0,m=parseInt(e.css(t,"borderLeftWidth"))||0,x=d?"(0 - "+d+")":0,T=m?"(0 - "+m+")":0;e.each([E,g,y],function(e,t){var n=t[0].style;n.position="absolute";if(2>e)s?n.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.boxModel?0:"+r.quirksmodeOffsetHack+') + "px"'):n.setExpression("height",'this.parentNode.offsetHeight + "px"'),s?n.setExpression("width",'jQuery.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"'):n.setExpression("width",'this.parentNode.offsetWidth + "px"'),T&&n.setExpression("left",T),x&&n.setExpression("top",x);else if(r.centerY)s&&n.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"'),n.marginTop=0;else if(!r.centerY&&s){var i="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+(r.css&&r.css.top?parseInt(r.css.top):0)+') + "px"';n.setExpression("top",i)}})}f&&(r.theme?y.find(".ui-widget-content").append(f):y.append(f),(f.jquery||f.nodeType)&&e(f).show());(e.browser.msie||r.forceIframe)&&r.showOverlay&&E.show();r.fadeIn?(d=r.onBlock?r.onBlock:a,E=r.showOverlay&&!f?d:a,d=f?d:a,r.showOverlay&&g._fadeIn(r.fadeIn,E),f&&y._fadeIn(r.fadeIn,d)):(r.showOverlay&&g.show(),f&&y.show(),r.onBlock)&&r.onBlock();i(1,t,r);s?(h=y[0],p=e(":input:enabled:visible",h),r.focusInput&&setTimeout(o,20)):u(y[0],r.centerX,r.centerY);r.timeout&&(f=setTimeout(function(){s?e.unblockUI(r):e(t).unblock(r)},r.timeout),e(t).data("blockUI.timeout",f))}function n(t,n){var s=t==window,o=e(t),u=o.data("blockUI.history"),a=o.data("blockUI.timeout");a&&(clearTimeout(a),o.removeData("blockUI.timeout"));n=e.extend({},e.blockUI.defaults,n||{});i(0,t,n);var f;f=s?e("body").children().filter(".blockUI").add("body > .blockUI"):e(".blockUI",t);s&&(h=p=null);n.fadeOut?(f.fadeOut(n.fadeOut),setTimeout(function(){r(f,u,n,t)},n.fadeOut)):r(f,u,n,t)}function r(t,n,r,i){t.each(function(){this.parentNode&&this.parentNode.removeChild(this)});n&&n.el&&(n.el.style.display=n.display,n.el.style.position=n.position,n.parent&&n.parent.appendChild(n.el),e(i).removeData("blockUI.history"));"function"==typeof r.onUnblock&&r.onUnblock(i,r)}function i(t,n,r){var i=n==window,n=e(n);if(t||!(i&&!h||!i&&!n.data("blockUI.isBlocked")))i||n.data("blockUI.isBlocked",t),r.bindEvents&&(!t||r.showOverlay)&&(t?e(document).bind("mousedown mouseup keydown keypress",r,s):e(document).unbind("mousedown mouseup keydown keypress",s))}function s(t){if(t.keyCode&&9==t.keyCode&&h&&t.data.constrainTabKey){var n=p,r=t.shiftKey&&t.target===n[0];if(!t.shiftKey&&t.target===n[n.length-1]||r)return setTimeout(function(){o(r)},10),!1}n=t.data;return 0<e(t.target).parents("div."+n.blockMsgClass).length?!0:0==e(t.target).parents().children().filter("div.blockUI").length}function o(e){p&&(e=p[!0===e?p.length-1:0])&&e.focus()}function u(t,n,r){var i=t.parentNode,s=t.style,o=(i.offsetWidth-t.offsetWidth)/2-(parseInt(e.css(i,"borderLeftWidth"))||0),t=(i.offsetHeight-t.offsetHeight)/2-(parseInt(e.css(i,"borderTopWidth"))||0);n&&(s.left=0<o?o+"px":"0");r&&(s.top=0<t?t+"px":"0")}if(/1\.(0|1|2)\.(0|1|2)/.test(e.fn.jquery)||/^1.1/.test(e.fn.jquery))alert("blockUI requires jQuery v1.2.3 or later!  You are using v"+e.fn.jquery);else{e.fn._fadeIn=e.fn.fadeIn;var a=function(){},f=document.documentMode||0,l=e.browser.msie&&(8>e.browser.version&&!f||8>f),c=e.browser.msie&&/MSIE 6.0/.test(navigator.userAgent)&&!f;e.blockUI=function(e){t(window,e)};e.unblockUI=function(e){n(window,e)};e.growlUI=function(t,n,r,i){var s=e('<div class="growlUI"></div>');t&&s.append("<h1>"+t+"</h1>");n&&s.append("<h2>"+n+"</h2>");void 0==r&&(r=3e3);e.blockUI({message:s,fadeIn:700,fadeOut:1e3,centerY:!1,timeout:r,showOverlay:!1,onUnblock:i,css:e.blockUI.defaults.growlCSS})};e.fn.block=function(n){return this.unblock({fadeOut:0}).each(function(){"static"==e.css(this,"position")&&(this.style.position="relative");e.browser.msie&&(this.style.zoom=1);t(this,n)})};e.fn.unblock=function(e){return this.each(function(){n(this,e)})};e.blockUI.version=2.37;e.blockUI.defaults={message:"<h1>Please wait...</h1>",title:null,draggable:!0,theme:!1,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",cursor:"wait"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:.6,cursor:"wait"},growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:!1,baseZ:1e3,centerX:!0,centerY:!0,allowBodyStretch:!0,bindEvents:!0,constrainTabKey:!0,fadeIn:200,fadeOut:400,timeout:0,showOverlay:!0,focusInput:!0,applyPlatformOpacityRules:!0,onBlock:null,onUnblock:null,quirksmodeOffsetHack:4,blockMsgClass:"blockMsg"};var h=null,p=[]}})(jQuery);$(function(){$.fn.loadGrid=function(e){return this.each(function(){function t(e){r.data().loadStart&&r.loadStart();r.data("gridLoading",!1);r.data("totalRows",e.nRows);r.data("firstRowShowing",e.start);r.data("lastRowShowing",e.end);r.data("rowData",{});e.colData&&$.each(e.colData,function(e,t){$.each(t,function(t,n){r.data().columnOpts[e]&&(r.data().columnOpts[e][t]=n)})});if(r.data().pager){var t=r.getHeaderRow().find("th[col="+e.order_by+"]").text();e.end>e.nRows&&(e.end=e.nRows);s.find(".gridTotal").html(""+e.start+" - "+e.end+" of <span class='nRows'>"+e.nRows+"</span> by "+t+" "+e.sort);$(".nRows").click(function(){$(this).parents(".gridContainer").find(".grid").loadGrid({nRowsShowing:$(this).html()})})}r.find("tr").remove();r.getHeaderRow().find("th[col='#'],th[col='X'],th[col='+']").remove();r.getHeaderRow().find("th");if(e.rows&&"[object Object]"==e.rows.toString()){var i=n.rowClick?n.rowClick:null;$.each(e.rows,function(e,t){e=e.substr(1);if(!r.getHeaderRow().find("[primary_key="+e+"]").length){var n=$("<tr primary_key='"+e+"'>");i&&n.click(i);$.each(r.data().columnOpts,function(i,s){var o=t[i];s.currency&&(o=formatMoney(o,s.currency));r.data().columnOpts[i].value=o;if(s.type&&"image"==s.type){var o="<img style='width:100%' src='"+o+"'/>",u=r.getHeaderRow().find("th[col="+i+"]");u.attr("width")||u.attr("width",100)}s.link&&(u="<a target='"+s.linkTarget+"' href='"+s.link+"'>"+o+"</a>",o=u=u.replace("{COL}",i).replace("{VALUE}",o).replace("{ROWID}",e));n.append("<td col='"+i+"'>"+o+"</td>")});r.append(n);$.each(t,function(e,t){r.data().rowData[e]||(r.data().rowData[e]=[]);r.data().rowData[e].push({value:t})})}})}else r.append("<tr><td colspan=100>No Rows</td></tr>");$.each(r.data().columnOpts,function(e,t){t.link&&r.getCol(e).getTdsFromTh().each(function(){var e=$(this).find("a"),t=e.attr("href"),n=$(this).parents("tr"),i=t.match(/\[([\w]+)\]/g);i&&$.each(i,function(i,s){var o=s.match(/\[([\w]+)\]/)[1],u=n.prevAll().length;t=t.replace("["+o+"]",r.data().rowData[o][u].value);e.attr("href",t)})})});r.getHeaderRow().find("th").each(function(e){if($(this).attr("width")){var t=parseInt($(this).attr("width"));r.find("tr:first td").eq(e).css("width",t)}});r.data().inlineEditing&&r.setupInlineEditing();try{$(".datepicker").datepicker({dateFormat:r.data().dateFormat})}catch(o){}0<r.data().totalRows?(r.data().showRowNumber&&r.createRowCount(),r.data().deleting&&r.createDeleteColumn()):r.parents(".gridContainer").find(".gridSave").fadeOut();r.hideHiddenCols();r.equalizeColumns();$.blockUI&&r.unblock();r.data().loadComplete&&r.loadComplete()}var n=$.extend({order_by:"",sort:"ASC",page:1,search:"",justSearched:!1,nRowsShowing:10,resizable:!1,resizableColumns:!0,pager:!0,pagerLocation:"bottom",saveLocation:"pager",refreshButton:!1,dateRange:!1,dateRangeFrom:"",dateRangeTo:"",stickyRows:!0,clickToSort:!0,inlineEditing:!1,showRowNumber:!1,loadingMessage:"loading",maxLength:!1,width:"100%",height:"auto",maxHeight:500,fullScreen:!1,adding:!1,addButton:!1,linkTarget:"_blank",confirmBeforeSort:!0,deleting:!0,deleteConfirm:!0,dateFormat:"yy-mm-dd",pageSearchResults:!1,columnOpts:null,rowClick:null,rowAdd:null,cellAdd:null,beforeLoadStart:null,loadStart:null,loadComplete:null,saveSuccess:null,saveFail:null,deleteSuccess:"Content Deleted",deleteFail:"Delete Failed",title:!1,searchBar:!0},e),r=$(this);r.parents(".gridWrapper").length||r.wrap("<div class='gridContainer'>").wrap("<div class='gridWrapper'>");r.data().page?$.extend(r.data(),e):$.each(n,function(e,t){"function"!=typeof t?r.data(e,t):($.fn[e]=t,r.data(e,!0))});r.parents(".gridContainer").width(r.data().width);r.parents(".gridContainer").height(r.data().height);r.parents(".gridWrapper").css("max-height",r.data().maxHeight);$.blockUI&&r.block({message:r.data().loadingMessage});var i=r.moveHeaderRow();r.data().objectized||(i.find("th").each(function(){var e=$(this);1<e[0].attributes.length&&$.each($(e[0].attributes),function(t){var n=e[0].attributes[t].name,t=e[0].attributes[t].value;r.data().columnOpts||r.data("columnOpts",{});r.data().columnOpts[e.attr("col")]||(r.data().columnOpts[e.attr("col")]={});r.data().columnOpts[e.attr("col")][n]=t})}),r.data("objectized",!0));if(r.data().pager)var s=r.createPager();r.attr("title")&&!r.parents(".gridContainer").find(".gridTitle").length&&(r.parents(".gridContainer").prepend("<div class='gridTitle'>"+r.attr("title")+"</div>"),r.data().adding?(r.parents(".gridContainer").find(".gridTitle").append("<div class='gridButton gridAdd'><div>Add</div></div>"),r.parents(".gridContainer").find(".gridAdd").click(function(){var e=[];$.each(r.data().columnOpts,function(t,n){n.editable&&e.push(t)});$.post(r.attr("action"),{add:!0,cols:e},function(e){r.loadGrid({order_by:e,sort:"DESC"})})})):r.data().addButton&&r.parents(".gridContainer").find(".gridTitle").append("<a href='"+r.data().addButton+"' class='gridButton gridAdd'><div>Add</div></a>"));if(r.data().fullScreen){r.parents(".gridContainer").width("100%");r.parents(".gridContainer").find(".gridHeaderRow").width("100%");r.parents(".gridWrapper").css("max-height","none");var i=parseInt(r.find("tr:last").css("height")),o=parseInt(r.parents(".gridContainer").find(".gridHeaderRow th:first").css("padding-top"));r.css("margin-bottom",i+o);s.addClass("fixed");$(window).resize(function(){r.equalizeColumns()})}r.data().resizable&&r.makeResizable();r.data("cols",r.getHeaderRow().find("th[col!='X'][col!='#'][col!='+']").attrJoin("col"));r.data().beforeLoadStart&&r.beforeLoadStart();r.data("gridLoading",!0);$.ajax({url:r.attr("action"),type:"POST",data:{data:r.data(),table:r.attr("sel"),load:!0},dataType:"json",success:function(e,n,r){$(".data").html(e);$(".data").html(e.colData);t(e,n,r)}})})};$(".gridSearch input[type=text]").live("keyup",function(){var e=$(this).parents(".gridContainer").find(".grid");0==e.data().justSearched?(e.loadGrid({search:$(this).val(),page:1}),e=$(this).parents(".gridContainer").find(".grid"),e.parents(".gridContainer").find(".gridSearch input").val(search)):e.data("justSearched",!1)}).live("keydown",function(e){var t=$(this).parents(".gridContainer").find(".grid");"13"==e.keyCode&&(2<$(this).val().length||0==$(this).val().length)&&(t.data("justSearched",!0),t.loadGrid({search:$(this).val(),page:1}))});$(".nRowsShowing").live("keydown",function(e){13==e.keyCode&&0<parseInt($(this).val())&&($(this).parents(".gridContainer").find(".grid").loadGrid({nRowsShowing:$(this).val()}),e.preventDefault())}).live("keyup",function(){$(this).parents(".gridContainer").find(".grid").parents(".gridContainer").find(".nRowsShowing").val($(this).val())});$(".gridHeaderRow th").live("click",function(e){var t=$(this).parents(".gridContainer").find(".grid"),n=!0;t.find("tr.toBeSaved").length&&t.data().confirmBeforeSort&&(n=confirm("You have unsaved changes on the grid, if you continue those changes will be lost. Continue?"));!$(e.target).hasClass("colHandle")&&n&&t.data().clickToSort&&(e="DESC"==t.data().sort?"ASC":"DESC",t.loadGrid({sort:e,order_by:$(this).attr("col")}))});$(".gridHeaderRow th").live("mousedown",function(e){if(3!=e.which)return!1});$(".gridHeaderRow th").live("contextmenu",function(e){var t=$(this),n=$(this).parents(".gridContainer").find(".grid");0<$(".gridContext").length&&$(".gridContext").remove();var r="checkbox"==n.data().columnOpts[$(this).attr("col")].editable?"block":"none",i=!1,s=null,o=null,u=null,a=null,f=null;$(this).getTdsFromTh().each(function(e){var t=$(this).find("input").length?$(this).find("input").val():$(this).text();-1==t.search(/^[\d.\$\u00db\u00a3\u00b4\u00a3]*$/)&&(i=!0);t=parseFloat(t.replace(/[\$\u00db\u00a3\u00b4]/,""));s+=t;a||(a=t);u=t>u?t:u;a=t<a?t:a;f=e});var s=Math.round(100*s)/100,o=Math.round(100*(u/f))/100,l=i?"none":"block";n.data().columnOpts[t.attr("col")].currency&&(t=n.data().columnOpts[t.attr("col")].currency,s=formatMoney(s,t),a=formatMoney(a,t),u=formatMoney(u,t),o=formatMoney(o,t));e=$("<div class='gridContext'><div class='closeContext'>x</div><div class='makeFluid'>Make Fluid</div><div class='colHide'>Remove</div><div class='colHighlite'>Highlite</div><div class='colDeHighlight'>Un-Highlite</div><hr style='display:"+l+"'><div style='display:"+
l+"'>Sum: <span class='showSum'>"+s+"</span></div><div style='display:"+l+"'>Avg: <span class='showAvg'>"+o+"</span></div><div style='display:"+l+"'>Max: <span class='showMax'>"+u+"</span></div><div style='display:"+l+"'>Min: <span class='showMin'>"+a+"</span></div><hr style='display:"+r+"'><div style='display:"+r+"' class='checkAll'>Check All</div><div style='display:"+r+"' class='uncheckAll'>UnCheck All</div></div>").css({left:e.clientX+200>$(window).width()?e.clientX-200:e.clientX,top:e.clientY});e.attr("index",$(this).prevAll().length);$(this).parents(".gridContainer").append(e);n=$(this).parents(".gridContainer").find(".grid");$(".closeContext").click(function(){n.equalizeColumns()});return!1});$(".checkAll").live("click",function(){var e=$(this).parent().attr("index"),t=$(this).parents(".gridContainer").find(".grid");t.getHeaderRow().find("th").eq(e).getTdsFromTh().each(function(){$(this).find(":checkbox").attr("checked",!0);$(this).parents("tr").addClass("toBeSaved")});t.equalizeColumns()});$(".uncheckAll").live("click",function(){var e=$(this).parent().attr("index"),t=$(this).parents(".gridContainer").find(".grid");t.getHeaderRow().find("th").eq(e).getTdsFromTh().each(function(){$(this).find(":checkbox").attr("checked",!1);$(this).parents("tr").addClass("toBeSaved")});t.equalizeColumns()});$(".makeFluid").live("click",function(){var e=$(this).parent().attr("index"),t=$(this).parents(".gridContainer").find(".grid"),n=t.getHeaderRow().find("th").eq(e),e=t.find("tr:first td").eq(e);n.removeAttr("width");e.width("auto");t.equalizeColumns()});$(".colHide").live("click",function(){var e=$(this).parent().attr("index"),t=$(this).parents(".gridContainer").find(".grid"),e=t.getHeaderRow().find("th").eq(e);e.getTdsFromTh().each(function(){$(this).remove()});e.remove();t.equalizeColumns()});$(".colHighlite").live("click",function(){var e=$(this).parent().attr("index"),t=$(this).parents(".gridContainer").find(".grid");t.getHeaderRow().find("th").eq(e).getTdsFromTh().each(function(){$(this).addClass("hilite")});t.equalizeColumns()});$(".colDeHighlight").live("click",function(){var e=$(this).parent().attr("index"),t=$(this).parents(".gridContainer").find(".grid");t.getHeaderRow().find("th").eq(e).getTdsFromTh().each(function(){$(this).removeClass("hilite")});t.equalizeColumns()});$(".gridTitle").live("click",function(){0<$(".gridContext").length&&$(".gridContext").remove()});$(".grid tr").live("dblclick",function(){var e=$(this).parents(".grid");e.data().stickyRows&&($(this).addClass("stuckRow"),e.getHeaderRow().append($(this)),e.equalizeColumns())});$(".gridHeaderRow tr").live("dblclick",function(){var e=$(this).parents(".gridContainer").find(".grid");$(this).prevAll().length&&($(this).remove(),e.loadGrid())});$(".gridNext").live("click",function(){var e=$(this).parents(".gridContainer").find(".grid");if(!e.data().gridLoading){var t=parseInt(e.data().lastRowShowing);parseInt(e.data().nRowsShowing);var n=parseInt(e.data().totalRows);t<n&&e.loadGrid({page:parseInt(e.data().page)+1})}});$(".gridBack").live("click",function(){var e=$(this).parents(".gridContainer").find(".grid");!e.data().gridLoading&&1<e.data().page&&e.loadGrid({page:parseInt(e.data().page)-1})});$(".gridRefresh").live("click",function(){$(this).parents(".gridContainer").find(".grid").loadGrid()});$(".gridWrapper").live("mousedown",function(){if(!$(this).find(".grid").data().inlineEditing)return!1});$(".gridButton, .gridHandle").live("mousedown",function(){return!1});$(window).resize(function(){});$.fn.exportAsJson=function(){return $(this).data().rowData};$.fn.hideHiddenCols=function(){var e=$(this);$.each(e.data().columnOpts,function(t,n){n.display&&"hidden"==n.display&&e.hideCol(n.col)})};$.fn.hideCol=function(e){e=$(this).getHeaderRow().find("th[col="+e+"]");e.hide();e.getTdsFromTh().hide()};$.fn.setupInlineEditing=function(){var e=$(this);e.data().pager||e.data("saveLocation","title");e.parents(".gridContainer").find(".gridSave").remove();switch(e.data().saveLocation){case"title":e.parents(".gridContainer").find(".gridTitle").append("<div class='gridButton gridSave'><div>Save</div></div>");break;case"both":e.getPager().append("<div class='gridButton gridSave'><div>Save</div></div>");e.parents(".gridContainer").find(".gridTitle").append("<div class='gridButton gridSave'><div>Save</div></div>");break;default:e.getPager().append("<div class='gridButton gridSave'><div>Save</div></div>")}var t=e.parents(".gridContainer").find(".gridSave");"none"==t.css("display")&&t.fadeIn().click(function(){var n=[];e.find("tr.toBeSaved").each(function(){var e=[];$(this).find(".editableInput").each(function(){var t=$(this).parent().attr("col"),n="checkbox"==$(this)[0].type?$(this)[0].checked?1:0:$(this).val(),n=n.toString().replace(/"/g,'\\"'),n=n.toString().replace(/\r|\n/g,"\\n");e.push('"'+t+'":"'+n+'"')});var t=$(this).attr("primary_key"),r="{"+e.join(",")+"}";n.push('"'+t+'":'+r)});var r="{"+n.join(",")+"}";"{}"!=r&&(console.log(r),$.blockUI&&e.block({message:e.data().loadingMessage}),$.post(e.attr("action"),{save:1,json:r},function(n){n?(t.text("ERROR! refresh"),alert(n),e.data().saveFail&&e.saveFail()):(t.html("Saved!").fadeOut("fast",function(){t.fadeIn("fast",function(){t.html("Save");e.data().saveSuccess&&e.saveSuccess()})}),e.loadGrid())}))});e.getHeaderRow().find("th").each(function(){var t=$(this),n=t.attr("col");if(e.data().columnOpts[n]&&e.data().columnOpts[n].editable){var r=e.data().columnOpts[n].editable;"text"==r||"inline"==r||"date"==r||"textarea"==r?t.getTdsFromTh().each(function(){var t=$(this);if(!t.hasClass("editableCell")){t.addClass("editableCell");var i=i?0:t.width(),s="";e.data().columnOpts[n].maxLength&&(s="maxlength='"+e.data().columnOpts[n].maxLength+"'");"null"==t.text()&&t.text("");var o="date"==r?"datepicker":"",s="textarea"==r?$("<textarea "+s+' class="editableInput '+o+'"></textarea>'):$("<input "+s+' class="editableInput '+o+'" type="text" />');s.val(t.text());s.focus(function(){$(this).parents("tr").addClass("toBeSaved")});t.html(s);t.width(i)}}):"passthru"==r?t.getTdsFromTh().each(function(){var e=$(this);if(!e.hasClass("editableCell")){e.addClass("editableCell");"null"==e.text()&&e.text("");var t=$("<input type='hidden' class='editableInput' value='"+e.text()+"'/>");t.focus(function(){$(this).parents("tr").addClass("toBeSaved")});e.append(t)}}):"select"==r?$.post(e.attr("action"),{select:1,col:n},function(r){t.getTdsFromTh().each(function(){var t=$(this),i=$("<select class='editableInput'></select>");(nullText=e.data().columnOpts[n].nulltext)&&i.append("<option value=''>"+nullText+"</option>");$.each(r,function(e,n){t.text()==e?i.append("<option selected value='"+e+"'>"+n+"</option>"):i.append("<option value='"+e+"'>"+n+"</option>")});i.focus(function(){$(this).parents("tr").addClass("toBeSaved")});$(this).addClass("editableCell").html(i)});e.equalizeColumns()},"json"):"checkbox"==r&&t.getTdsFromTh().each(function(){$(this).addClass("editableCell");var e=parseInt($(this).text()),e=e?$("<input class='editableInput' type='checkbox' checked value='"+e+"'/>"):$("<input class='editableInput' type='checkbox' value='"+e+"'/>");e.click(function(){$(this).parents("tr").addClass("toBeSaved")});$(this).html(e)})}})};$.fn.createRowCount=function(){var e=$(this);e.getHeaderRow().find("tr:first").prepend("<th style='width:20px' col='#'><div class='colResizer' style='width:20px'>#<div class='colHandle'></div></div></th>");e.find("tr").each(function(t){t+=parseInt(e.data().firstRowShowing);$(this).prepend("<td col='#'>"+t+"</td>")});e.equalizeColumns()};$.fn.createDeleteColumn=function(){var e=$(this);e.getHeaderRow().find("tr:first").append("<th col='X' style='width:20px'><div class='colResizer' style='width:20px'>Delete<div class='colHandle'></div></div></th>");e.find("tr").each(function(){var t=$(this);$del=$("<div class='deleteGrid ninjaSymbol ninjaSymbolClear'></div>");$del.click(function(){if(e.data().deleteConfirm){var n=t.prevAll().length,n=e.data().rowData[e.data().deleteConfirm]?e.data().rowData[e.data().deleteConfirm][n].value:"";confirm("Are you sure you want to delete "+n+" ?")&&$.post(e.attr("action"),{"delete":!0,primary_key:$(this).parents("tr").attr("primary_key"),table:$(this).parents("tr").parent("tbody").parent("table").attr("sel")},function(t){t?(e.loadGrid(),e.data().deleteSuccess&&e.deleteSuccess()):(e.data().deleteFail&&e.deleteFail(),alert("Error: Delete Failed"))})}else $.post(e.attr("action"),{"delete":!0,primary_key:$(this).parents("tr").attr("primary_key")},function(){e.loadGrid()})});$(this).append($("<td col='X' style='width:20px'></td>").append($del))});e.equalizeColumns()};$.fn.getCol=function(e){return $(this).getHeaderRow().find("th[col="+e+"]")};$.fn.getTdsFromTh=function(){return $(this).parents(".gridContainer").find(".grid").find("td[col="+$(this).attr("col")+"]")};$.fn.equalizeColumns=function(){var e=$(this);return this.each(function(){0<$(".gridContext").length&&$(".gridContext").remove();var t=e.getHeaderRow();if(e.height()>e.parents(".gridWrapper").height()){t.find(".scrollTh").remove();var n=$("<th></th>").addClass("scrollTh").css({padding:0,margin:0,width:15});t.find("tr:first").append(n)}else e.parents(".gridWrapper").height()>e.height()&&$(".scrollTh").remove();e.find("tr:first td:visible").each(function(e){e=t.find(".colResizer").eq(e);parseInt(e.parents("th").css("padding-left"));parseInt(e.parents("th").css("padding-left"));e.width($(this).width())})})};$.fn.moveHeaderRow=function(){var e=$(this);e.getHeaderRow().length||($firstTr=e.find("tr:first").clone(),e.parents(".gridContainer").prepend($("<table class='gridHeaderRow'>").append($firstTr)),$firstTr.find("th").each(function(){var t=$(this),n=t.text();t.html("");e.getHeaderRow().find("th");var r=$("<div class='colHandle'></div>");r.height(t.outerHeight());n=$("<div class='colResizer'></div>").html(n).append(r);e.data().resizableColumns&&r.mousedown(function(n){var r=n.clientX;$(document).bind("mousemove.grid",function(n){var i=t.find("div.colResizer"),s=i.width()+(n.clientX-r),o=t.prevAll().length;i.width(s);e.find("tr:first td").eq(o).width(s);r=n.clientX;e.equalizeColumns();t.attr("width",s)});$(document).mouseup(function(){$(document).unbind("mousemove.grid")})});t.width("auto");t.append(n);n=-1*parseInt(t.css("padding-top"));r.css({top:n,right:-1*r.outerWidth()/1.9})}),e.getHeaderRow().find(".colhandle:last").remove());return e.getHeaderRow()};$.fn.createPager=function(){var e=$(this),t=e.getPager();if(!t.length){t="";e.data().dateRange&&(t="<div class='dateRange'><input type='text' class='dateRangeFrom datepicker' value='"+e.data().dateRangeFrom+"'/> -<input type='text' class='dateRangeTo datepicker' value='"+e.data().dateRangeTo+"'/></div><div class='gridButton dateGo'><div>Go</div></div>");var n="";e.data().refreshButton&&(n="<div class='gridButton gridRefresh'><div>Refresh</div></div>");t=$("<div class='gridPager'>"+n+"<div class='gridSearch'><input type='text' placeholder='search' value=''/></div><div class='gridLimit'><input type='text' value='"+e.data().nRowsShowing+"' style='width:20px' class='nRowsShowing'/></div><div class='gridButton gridBack'><div>Back</div></div><div class='gridButton gridNext'><div>Next</div></div><div class='gridTotal'></div>"+t+"<div class='gridButton gridSave'><div>Save</div></div></div>");switch(e.data().pagerLocation){case"bottom":e.parents(".gridContainer").append(t);break;case"top":e.parents(".gridContainer").prepend(t);break;case"both":e.parents(".gridContainer").prepend(t.clone()),e.parents(".gridContainer").append(t)}e.data().dateRange&&($(".dateGo").click(function(){e.loadGrid({dateRangeFrom:$(this).parents(".gridContainer").find(".dateRangeFrom").val(),dateRangeTo:$(this).parents(".gridContainer").find(".dateRangeTo").val()})}),$(".dateRangeFrom").change(function(){$(this).parents(".gridContainer").find(".dateRangeFrom").val($(this).val())}),$(".dateRangeTo").change(function(){$(this).parents(".gridContainer").find(".dateRangeTo").val($(this).val())}))}return e.getPager()};$.fn.getHeaderRow=function(){return $(this).parent().prev(".gridHeaderRow")};$.fn.getPager=function(){return $(this).parents(".gridContainer").find(".gridPager")};$.fn.makeResizable=function(){var e=$(this),t=e.parents(".gridContainer"),n=e.parents(".gridWrapper"),r=$("<div class='gridHandle'></div>");r.mousedown(function(r){var i=r.clientX,s=r.clientY;$(document).bind("mousemove.resize",function(r){t.width(t.width()+(r.clientX-i));n.height(n.height()+(r.clientY-s));n.css("max-height",n.css("max-height")+(r.clientY-s));i=r.clientX;s=r.clientY;e.equalizeColumns()});$(document).mouseup(function(){$(document).unbind("mousemove.resize")})});e.parents(".gridContainer").append(r)};$.fn.attrJoin=function(e){return $(this).map(function(){return $(this).attr(e)}).get().join(",")}});(function(e){e.fn.modal=function(t){function s(){r.removeClass();r.addClass("error");r.addClass("modal");r.children(".text").after('<a class="reportError button">Report Error</a>');a()}function o(e){r.removeClass();r.addClass("message");r.addClass("modal");a();r.delay(3e3).fadeOut(200,function(){f()})}function u(){r.removeClass();r.addClass("html");r.addClass("modal");e.ajax({type:"POST",url:n.url,success:function(e){r.children(".text").html(e);a()},error:function(e,t,n){r.html('<ul class="errors"><li>Something went wrong with out System, please alert our admin with this id: AJ198473</li></ul>');a()}})}function a(){if(i==="center"){r.css("width",n.width);r.css("height",n.height);_height=e(window).scrollTop();e(".mask").css({height:e(document).height(),width:e(document).width()});e(".dialog").css({top:e(window).height()/2-n.height/2+_height,left:e(window).width()/2-n.width/2});e("#mask").fadeIn(1e3);e("#mask").fadeTo("slow",.6);r.css({top:e(window).height()/4,left:e(window).width()/2-r.width()/2});r.children(".text").before('<a class="close"></a>');_left=r.offset().left;_objectW=r.outerWidth()-15;var t=_objectW+_left;_top=r.offset().top;_objectH=17.5;var s=_top-_objectH;r.children("a.close").css({left:t,top:s})}r.fadeIn(1e3)}function f(){e.ajax({url:"/ajax/admin/admin_functionality.php",type:"POST",data:{closeError:1},success:function(t){r.hide();r.html("");r.removeClass();e("#mask").remove()},error:function(t,n,r){e(".text").html("I was not able to close your error. Please report to system Admin.")}})}var n={style:"message",text:"",url:"",cancel:"",reportError:!0,reportURL:"",height:"",width:"60%"};t=e.extend(n,t);var r=e(this);r.before('<div id="mask"><div>');var i="center";if(n.style==="error"){r.html('<div class="text">'+n.text+"<div>");n.width="40%";s()}else if(n.style==="message"){r.html(n.text);i="top";o()}else if(n.style==="html"){r.html('<div class="text">'+n.text+"</div>");u()}e(".modal .close").live("click",function(){f();n.cancel.call(this)});e("#mask").live("click",function(){f();n.cancel.call()})}})(jQuery);